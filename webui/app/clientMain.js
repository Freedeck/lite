(()=>{var e,t,n,a,i,s,o={44:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});const a=["MobileDevice","CurrentPage","Soundboard","Style","Profiles","Footer"];function i(e){return new Promise((t=>{const a=document.querySelector(".sidebar");if(!a)return console.error("Sidebar element not found"),void t();new MutationObserver(((n,a)=>{for(const i of n)for(const n of i.addedNodes)if(n.id===e){universal.CLU("Boot / Sidebar",`Loaded sidebar module ${n.id}`),a.disconnect(),t();break}})).observe(a,{childList:!0,subtree:!0}),n(367)(`./${e}.js`).then((e=>{"function"==typeof e.default&&e.default()}))}))}async function s(){await async function(e){for(const t of e)await i(t)}(a)}},340:(e,t,n)=>{"use strict";n.d(t,{UI:()=>v});var a=n(656);function i(e,t,n){const a=Object.keys(n)[0];if(t.innerHTML=`<div class="button-text"><p>${s(a)}</div></p>`,"true"===e.data.longPress&&"Companion"!==universal.name){const n=Number.parseInt(universal.lclCfg().longPressTime?universal.lclCfg().longPressTime:3),i=e=>{t.dataset.time=0,t.dataset.holding=!0,t.style.backgroundColor="rgba(0, 0, 0, 0)",t.style.transform="scale(0.75)",t.style.fontSize="2rem",t.querySelector(".button-text").querySelector("p").innerText=n,t.interval=setInterval((()=>{t.dataset.time=Number.parseInt(t.dataset.time)+1,t.style.backgroundColor=`rgba(0, 0, 0, ${.1*Number.parseInt(t.dataset.time)+.1})`,t.style.transform=`scale(${.75+.05*Number.parseInt(t.dataset.time)})`,t.querySelector(".button-text").querySelector("p").innerText=n-Number.parseInt(t.dataset.time),Number.parseInt(t.dataset.time)>=n&&(o(e),clearInterval(t.interval))}),1e3)},o=i=>{t.dataset.holding=!1,t.style.backgroundColor=e.data.color?e.data.color:"",t.style.transform="",t.style.fontSize="",t.querySelector(".button-text").querySelector("p").innerText=s(a),clearInterval(t.interval),Number.parseInt(t.dataset.time)>=n&&r(i),t.dataset.time=0};t.onmousedown=i,t.onmouseup=o,t.onmouseleave=o,t.ontouchstart=i,t.ontouchend=o,t.ontouchcancel=o,t.ontouchleave=o;const r=t=>{universal.send(universal.events.keypress,{event:t,btn:e})}}else{if("true"===universal.load("cct"))return;"Companion"===universal.name?t.onpointerup=t=>{universal.flags.isEnabled("try_buttons")&&1===t.which&&universal.send(universal.events.keypress,{event:t,btn:e})}:"true"===e.data.onRelease?t.onpointerup=t=>{1===t.which&&universal.send(universal.events.keypress,{event:t,btn:e})}:t.onpointerdown=t=>{("Companion"!==universal.name||universal.flags.isEnabled("try_buttons"))&&1===t.which&&universal.send(universal.events.keypress,{event:t,btn:e})}}if(universal.lclCfg().scroll){const e=t.querySelector("p");e.clientHeight>40&&e.classList.add("too-big")}}const s=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;");function o(e,t,n,a=!1){const i=Object.keys(n)[0];t.innerText=i,a&&"Companion"!==universal.name&&(t.style.opacity=.125)}function r(e,t,n,a){if("true"===n.data.showBg&&t.classList.add("no-bg"),"true"===n.data.noBorder&&t.classList.add("no-border"),"true"===n.data.noRounding&&t.classList.add("no-rounding"),"true"===n.data.noShadow&&t.classList.add("no-shadow"),"fd.sound"===e)i(n,t,a);else if("fd.none"===e)o(0,t,a,!0);else if("fd.select"===e)o(0,t,a,!0);else switch(n.renderType){case"button":default:i(n,t,a);break;case"slider":!function(e,t,n){const a=document.createElement("div");a.classList.add("slider-container"),a.dataset.value=e.data.value,t.appendChild(a);const i=document.createElement("div");i.classList.add("slider-title"),i.innerText=Object.keys(n)[0],a.appendChild(i);const s=document.createElement("div");s.classList.add("slider-thumb"),s.classList.add("context-aware"),a.appendChild(s);const o=document.createElement("div");o.classList.add("slider-percentage"),o.innerText=`${e.data.value}${e.data.format?e.data.format:"%"}`,a.appendChild(o),a.dataset.value=e.data.value,s.oncontextmenu=e=>{s.parentElement.parentElement.oncontextmenu(e)};const r=e.position,l=33*Math.floor((r-1)/5)+"%",d=(r-1)%5*20+"%";a.style.top=l,a.style.left=d;let c=!1;const u=t=>{const n=a.getBoundingClientRect();let i;if("vertical"===e.data.direction){let a=t.clientY-n.top;a<0&&(a=0),a>n.height&&(a=n.height),i=(n.height-a)/n.height*(e.data.max-e.data.min)+e.data.min}else{let a=t.clientX-n.left;a<0&&(a=0),a>n.width&&(a=n.width),i=a/n.width*(e.data.max-e.data.min)+e.data.min}i=Math.min(Math.max(i,e.data.min),e.data.max),a.dataset.value=i,e.data.value=i;const s=(i-e.data.min)/(e.data.max-e.data.min)*100;a.style.background="vertical"===e.data.direction?`linear-gradient(to top, var(--slider-background) ${s}%, var(--slider-foreground) ${s}%)`:`linear-gradient(to right, var(--slider-background) ${s}%, var(--slider-foreground) ${s}%)`;const r=Number.parseFloat(i).toFixed(1);o.innerText=`${r}${e.data.format?e.data.format:"%"}`,universal.send(universal.events.keypress,{isSlider:!0,sliderValue:e.data.value,event:t,btn:e})},h=setInterval((()=>{if(a.dataset.value===e.data.value)return;if(c)return;if(!document.body.contains(a))return void clearInterval(h);e.data.value=a.dataset.value;const t=e.data.min,n=e.data.max,i=e.data.value,s=(i-t)/(n-t)*100;"vertical"===e.data.direction?a.style.background=`linear-gradient(to top, var(--slider-background) ${s}%, var(--slider-foreground) ${s}%)`:a.style.background=`linear-gradient(to right, var(--slider-background) ${s}%, var(--slider-foreground) ${s}%)`;const r=Number.parseFloat(i).toFixed(1);o.innerText=`${r}${e.data.format?e.data.format:"%"}`}),500),p=e=>{a.dataset.dragging=!0,c=!0},m=e=>{a.dataset.dragging=!1,c=!1};s.addEventListener("mousedown",p),s.addEventListener("touchstart",p),s.addEventListener("mouseup",m),s.addEventListener("touchend",m),document.addEventListener("mousemove",(e=>{c&&u(e)})),document.addEventListener("touchmove",(e=>{c&&u(e.touches[0])}));const f=(e.data.value-e.data.min)/(e.data.max-e.data.min)*100;a.style.background=`linear-gradient(to right, var(--slider-background) ${f}%, var(--slider-foreground) ${f}%)`,"vertical"===e.data.direction&&(a.style.background=`linear-gradient(to top, var(--slider-background) ${f}%, var(--slider-foreground) ${f}%)`)}(n,t,a);break;case"text":!function(e,t,n){const a=Object.keys(n)[0];var i;t.innerHTML=`<div class="button-text"><p>${i=a,i.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div></p>`}(0,t,a)}universal.sendEvent("keyRendered",{keyObject:t,snd:n,sndType:e,rawDat:a})}const l={};let d,c,u,h;function p(){return new Promise(((e,t)=>{universal.CLU("Boot / UI : WARNING!","The boot log style hasn't been updated, and won't be! You may notice a few imperfections."),h.style.scale="1",h.style.display="block",d.style.display="block",c.style.animation="pull-down 0.5s",c.style.display="block"}))}function m(){return new Promise(((e,t)=>{e(!0),h.style.scale="0",d.style.display="none",universal.flags.isEnabled("skip-boot-animation")?(c.style.display="none",window.splashScreen&&window.splashScreen.unsplash()):setTimeout((()=>{h.style.display="none",window.splashScreen&&window.splashScreen.unsplash(),setTimeout((()=>{c.style.animation="pull-up 0.5s",c.querySelector("h1").style.animation="real-fade-out 0.5s",c.querySelector("img").style.animation="real-fade-out 0.5s",setTimeout((()=>{c.style.display="none"}),499)}),200)}),499)}))}function f(){universal.app_sounds=[];try{universal.app_sounds=universal.config.profiles[universal.config.profile]}catch(e){console.log(e)}let e=0;for(let t=0;t<universal.app_sounds.length/universal.config.iconCountPerPage;t++)l[t]=!0,e++;for(const t of universal.app_sounds)t[Object.keys(t)[0]].pos>=e*universal.config.iconCountPerPage&&(l[e]=!0,e++)}function g(){for(const e of document.querySelectorAll(".plugin-view"))e.remove();for(const e in universal.plugins){const t=universal.plugins[e];if(0!==Object.keys(t.views).length)for(const e in t.views){const n=t.views[e],a=document.createElement("div");a.classList.add("plugin-view"),a.classList.add("editor-section"),a.style.display="none",a.id=`plugin-view-${btoa(e).toLowerCase().split("=")[0]}`,(async()=>{const e=await fetch(`/user-data/plugin-views/${t.id}/${n}/view.html`),i=await e.text();a.innerHTML=i;const s=document.createElement("script");s.src=`/user-data/plugin-views/${t.id}/${n}/script.js`,s.type="module",document.body.appendChild(s)})(),document.querySelector("#editor-div").insertBefore(a,document.querySelector(".editor-options"));const i=document.createElement("button");i.innerText=e,i.onclick=()=>{document.querySelector("#none-only").style.display="none";for(const e of document.querySelectorAll(".plugin-view"))e.style.display="none";const t=document.querySelector("#editor-btn"),n=JSON.parse(t.getAttribute("data-interaction"));n.data._view=btoa(e).toLowerCase().split("=")[0],universal.setTileData("_view",btoa(e).toLowerCase().split("=")[0],n),t.setAttribute("data-interaction",JSON.stringify(n)),document.querySelector(`#plugin-view-${btoa(e).toLowerCase().split("=")[0]}`).style.display="block"},document.querySelector(".plugin-view-listing").appendChild(i)}}}function _(){if(universal.lclCfg().fill){const e=document.createElement("style");e.type="text/css",e.id="fill";const t="\n\t\t\t\t#keys .button {\n\t\t\t\twidth: unset; height: unset;\n\t\t\t\t}\n\t\t";e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e)}else{const e=document.getElementById("fill");e&&e.remove()}universal.lclCfg().compact?(universal.keys.style.width="unset",universal.keys.style.height="unset"):(universal.keys.style.width="100%",universal.keys.style.height="100%"),universal.config.iconCountPerPage=universal.lclCfg().iconCountPerPage,universal.page=universal.load("page")?Number.parseInt(universal.load("page")):0,f();for(const e of document.querySelectorAll("#keys > .button"))e.remove();if(document.querySelector(".k"))for(const e of document.querySelectorAll(".k"))e.remove();document.querySelector(".cpage")&&(document.querySelector(".cpage").innerText=`${(0,a.rG)("lside.pages.page")}${universal.page+1}/${Object.keys(l).length}`),universal.keySet();for(const e of document.querySelectorAll(".tile-tooltip"))e.remove();for(const e of universal.app_sounds){const t=Object.keys(e)[0],n=e[t];n.plugin&&(n.plugin=n.plugin.toLowerCase());let a=document.querySelector(`.k-${n.pos}`);if(!(n.pos<universal.config.iconCountPerPage*universal.page)){if(!a){if(0===universal.page)continue;const e=n.pos-universal.config.iconCountPerPage*universal.page;n.pos=e,a=document.querySelector(`.k-${n.pos}`),n.pos=e+universal.config.iconCountPerPage*universal.page}try{if(a?.querySelector(".slider-container")&&a.querySelector(".slider-container").remove(),n.pos>=universal.config.iconCountPerPage*(universal.page+1))continue;if(a.setAttribute("data-interaction",JSON.stringify(n)),a.setAttribute("data-name",t),a.classList.remove("unset"),n.data.icon&&(a.style.backgroundImage=`url("${n.data.icon}")`),n.data.color&&(a.style.backgroundColor=n.data.color),n.data.fontSize&&(a.style.fontSize=n.data.fontSize),r(n.type,a,n,e),!n.type.includes("fd.")){if(!universal.plugins[n.plugin]){console.log("plugin missing",n.plugin);const e=document.createElement("div");e.classList.add("indicator-red"),a.appendChild(e)}let e=!1;for(const t of universal._tyc.keys())t.type===n.type&&(e=!0);if(!e&&universal.plugins[n.plugin]){console.log("type missing",n.type);const e=document.createElement("div");e.classList.add("indicator-yellow"),a.appendChild(e)}}const i=universal.app_sounds.filter((e=>{const t=universal.page>0?1:0;return e[Object.keys(e)[0]].pos===n.pos+universal.page*universal.config.iconCountPerPage+t}));if(i.length>1&&a.classList.add("duplicate"),"Companion"!==universal.name)continue;let s="";if(s+=`<h4>${universal.cleanHTML(t,!1)}</h4>`,"text"!==n.renderType?s+="true"===n.data.longPress?"<p>Long press to activate.</p>":"<p>Short press to activate.</p>":s+="<p>Not pressable.</p>",n.plugin){universal.plugins[n.plugin]?s+=`<p>This tile uses ${universal.cleanHTML(universal.plugins[n.plugin].name,!1)}.</p>`:s+=`<p>${universal.cleanHTML(n.plugin,!1)} could not be found.</p>`;for(const e of Array.from(universal._tyc.keys()))if(e.type===n.type){s+=`<code>${e.name}</code>`;break}}"fd.sound"===n.type&&(s+="<p>Plays sound:</p>",s+=`<code>${universal.cleanHTML(n.data.path,!1)}${universal.cleanHTML(n.data.file,!1)}</code>`),"fd.profile"===n.type&&(s+="<p>Opens folder:</p>",s+=`<code>${universal.cleanHTML(n.data.profile,!1)}</code>`),"fd.macro_text"===n.type&&(s+="<p>Types out:</p>",s+=`<code>${universal.cleanHTML(n.data.macro,!1)}</code>`),"fd.macro"===n.type&&(s+="<p>Presses:</p>",s+=`<code>${universal.cleanHTML(n.data.macro,!1)}</code>`),"fd.none"===n.type?s+="<p>Does nothing.</p>":"fd.select"===n.type&&(s+="<p>No plugin selected.</p>"),s+="<p>Right click to edit.</p>",s+=`<details><summary>Advanced (press V)</summary><p>Type: ${n.type}</p><p>Pos: ${n.pos}</p><p>Data size: ${Object.keys(n.data).length}</p></details>`;const o=universal.createTooltipFor(a,s);o.classList.add("tile-tooltip"),window.addEventListener("keydown",(e=>{"v"===e.key&&(o.querySelector("details").open=!o.querySelector("details").open)}))}catch(n){console.log(`while rendering sound: ${t}`,e[t],"on page",universal.page),console.error(n)}}}if(universal.sendEvent("page_change"),"Companion"===universal.name)for(const e of document.querySelectorAll(".unset")){let t="<h4>Nothing!</h4>";t+="<p>Click this space to create a new Tile here.</p>",universal.createTooltipFor(e,t).classList.add("tile-tooltip");const n=Number.parseInt(e.className.split(" ")[1].split("-")[1])+(universal.page<0?1:0)+(universal.page>0?universal.config.iconCountPerPage*universal.page:0),a="fdc."+1e7*Math.random();v.reloadProfile();const i={type:"fd.none",pos:n,uuid:a,data:{}};e.addEventListener("click",(e=>{universal.send(universal.events.companion.new_tile,{"New Tile":i}),universal.listenForOnce("page_change",(()=>{universal.editTile({srcElement:{getAttribute:e=>JSON.stringify(i),dataset:{name:"New Tile",interaction:JSON.stringify(i)},className:"button k-0 k"}})}))}))}}window.RplTest=g;const v={reloadSounds:_,reloadProfile:f,quickActions:function(e){},Pages:l,initialize:function(){universal.CLU("Boot / UI","Initializing UI"),universal.config.iconCountPerPage=Number.parseInt(universal.lclCfg().iconCountPerPage)||12,universal.CLU("Boot / UI","Set icon count"),universal.theming.setTheme(universal.config.theme?universal.config.theme:"default",!1),universal.CLU("Boot / UI","Set local theme"),15!==universal.lclCfg()["font-size"]&&document.documentElement.style.setProperty("--font-size",`${universal.lclCfg()["font-size"]}px`),universal.CLU("Boot / UI","Set font size"),_(),universal.CLU("Boot / UI","Reloaded sounds"),universal.CLU("Boot / UI","UI initialized"),universal.showBootLog=p,universal.closeBootLog=m},makeBootLog:function(){const e=document.createElement("div");e.id="boot-log-div",e.innerHTML="<img src='/logo_big.png' class='n-icon'><h1>Freedeck</h1><div style='display:none;' id='boot-log'><center class='oclb'><button id='oclb'>Close Boot Log</button><button onclick='universal.storage.reset()'>Reset Storage</button></center></div>",document.body.appendChild(e),c=e,u=document.querySelector("#boot-log-div > center"),h=document.querySelector("#boot-log"),h.style.display="none",e.addEventListener("click",(()=>{h.style.display="block"})),e.addEventListener("touchstart",(()=>{h.style.display="block"})),d=document.querySelector("#oclb"),d.style.display="none",d.addEventListener("click",(()=>{m()}))},closeBootLog:m,showBootLog:p,visual:{idChangeText:function(e,t){for(const n of document.querySelectorAll(".button"))n.getAttribute("data-interaction")&&JSON.parse(n.getAttribute("data-interaction")).uuid===e&&"editor-btn"!==n.id&&(n.querySelector(".button-text p").innerText=t)},typeChangeText:function(e,t){for(const n of document.querySelectorAll(".button"))n.getAttribute("data-interaction")&&JSON.parse(n.getAttribute("data-interaction")).type===e&&"editor-btn"!==n.id&&(n.querySelector(".button-text p").innerText=t)}},makeGenericModal:function(e,t,n,a,i="",s=!1){const o=document.createElement("div");o.classList.add("modal"),o.innerHTML=`<div class="modalContent"><div class="modal-header"><h2 class="modal-title" style="text-align:left;">${e}</h2><span class="close modal-close">&times;</span></div><div class="modal-body"><p class="modal-description" style="text-align:left;width:100%;">${t}</p>${i}</div><div class="modal-footer"></div></div>`;const r=o.querySelector(".modal-footer");a||(o.querySelector(".modal-close").style.display="none");for(const e of n){const t=document.createElement("button");t.innerText=e.text,t.onclick=e.onclick,r.appendChild(t)}return document.body.appendChild(o),o.querySelector(".close").onclick=()=>{if(s)return o.classList.add("closing"),o.querySelector(".modal-body").classList.add("closing"),void setTimeout((()=>{o.style.display="none"}),250);o.classList.add("closing"),o.querySelector(".modal-body").classList.add("closing"),setTimeout((()=>{o.remove()}),250)},{modal:o,content:o.querySelector(".modal-body"),close:()=>{o.classList.add("closing"),o.querySelector(".modal-body").classList.add("closing"),setTimeout((()=>{o.remove()}),250)},hide:()=>{o.classList.add("closing"),o.querySelector(".modal-body").classList.add("closing"),setTimeout((()=>{o.style.display="none"}),250)},forceHide:()=>{o.style.display="none"},show:()=>{o.classList.remove("closing"),o.querySelector(".modal-body").classList.remove("closing"),o.style.display="flex"}}},reloadPluginViews:g}},367:(e,t,n)=>{var a={"./Client.js":[172,172],"./CurrentPage.js":[161,161],"./Footer.js":[51,432],"./MobileDevice.js":[779,779],"./Profiles.js":[621,621],"./SidebarLoader.js":[44],"./Soundboard.js":[398,398],"./Style.js":[366,366]};function i(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(i)))}i.keys=()=>Object.keys(a),i.id=367,e.exports=i},631:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var a=n(669),i=n(340);n(806),await a.m.init("Main"),window.onscroll=()=>{window.scrollTo(0,0)};let e=0,s=2500;const o=()=>{const t=a.m.page,n=s-e;document.querySelector("#lock").checked||(n<-50&&i.UI.Pages[t+1]&&(a.m.page++,a.m.save("page",a.m.page),i.UI.reloadSounds(),a.m.sendEvent("page_change"),a.m.sendEvent("animate_page","automated","left")),n>50&&i.UI.Pages[t-1]&&(a.m.page--,a.m.save("page",a.m.page),i.UI.reloadSounds(),a.m.sendEvent("page_change"),a.m.sendEvent("animate_page","automated","right")))};document.addEventListener("keydown",(e=>{"ArrowLeft"===e.key&&i.UI.Pages[a.m.page-1]&&(a.m.page--,a.m.save("page",a.m.page),a.m.uiSounds.playSound("page_down"),i.UI.reloadSounds(),a.m.sendEvent("page_change"),a.m.sendEvent("animate_page","automated","right")),"ArrowRight"===e.key&&i.UI.Pages[a.m.page+1]&&(a.m.page++,a.m.save("page",a.m.page),a.m.uiSounds.playSound("page_up"),i.UI.reloadSounds(),a.m.sendEvent("page_change"),a.m.sendEvent("animate_page","automated","left"))})),a.m.config.profile!==a.m.load("profile")&&(a.m.save("profile",a.m.config.profile),a.m.page=0,a.m.save("page",a.m.page),i.UI.reloadSounds());const r=a.m.lclCfg();document.documentElement.style.setProperty("--font-size",`${r["font-size"]}px`),document.documentElement.style.setProperty("--tile-width",`${r.buttonSize}rem`),document.documentElement.style.setProperty("--tile-height",`${r.buttonSize}rem`);let l="repeat(5, 2fr)";r.tileCols&&(l=l.replace("5",r.tileCols)),document.documentElement.style.setProperty("--tile-columns",l),window.addEventListener("touchstart",(t=>{e=t.changedTouches[0].screenX})),window.addEventListener("mousedown",(t=>{e=t.screenX})),document.addEventListener("mouseup",(e=>{s=e.screenX,o()})),document.addEventListener("touchend",(e=>{s=e.changedTouches[0].screenX,o()}));const d=document.querySelector("#version");d&&(d.innerText=`${a.m._information.version.human}`);const c=e=>{},u=document.querySelector("#fd-settings-button");u.onmousedown=c,u.ontouchstart=c,t()}catch(e){t(e)}}),1)},656:(e,t,n)=>{"use strict";n.d(t,{lE:()=>s,rG:()=>o});const a=localStorage.getItem("freedeck:locale")||"en";localStorage.getItem("freedeck:locale")||localStorage.setItem("freedeck:locale",a);let i={"locale.display":"English","sidebar.Tiles":"Tiles","sidebar.Library":"Library","sidebar.Marketplace":"Marketplace","sidebar.Settings":"Settings","sidebar.Connect":"Connect","sidebar.Recompile":"Recompile","sidebar.Setup":"Setup","sidebar.Pair Device":"Pair Device","sidebar.Themer":"Themer","lside.mobd":"Mobile Device","lside.mobd.pair":"Pair Mobile Device","lside.pages.page":"Page: ","lside.pages.try":"Try Tiles","lside.pages.previous":"Previous Page","lside.pages.next":"Next Page","lside.footer.thanks":"Thank you for using Freedeck!","lside.footer.github_pre":"Freedeck is open-source and can be found on","lside.footer.need_help":"Need help?","lside.footer.need_help.wiki":"Check the Wiki!","editor.sections.no_action":"No Action!","settings.title":"Settings","settings.sections.style":"Style","settings.sections.style.compact":"Compact Mode","settings.sections.style.scroll":"Scroll Long Text","settings.sections.style.fill":"Fill Tiles","settings.sections.style.themes":"Themes","settings.sections.language":"Language","settings.sections.plugins":"Plugins","settings.sections.plugins.reload_all":"Reload All Plugins","settings.sections.plugins.single.disable":"Disable","settings.sections.plugins.single.reload":"Reload","settings.sections.plugins.disabled.title":"Disabled Plugins","settings.sections.plugins.disabled.enable":"Enable","settings.sections.plugins.tile_previews":"Tile Previews","settings.sections.audio_devices":"Audio Devices","settings.sections.audio_devices.monitor":"Monitor Devices","settings.sections.audio_devices.vb":"VB-Cable Devices","settings.sections.general":"General","settings.sections.general.dont_ask":"Don't ask to delete Tiles","settings.sections.general.fdc_tab":"Show FDConnect as a tab","settings.sections.general.ui_sounds":"UI Sounds","settings.sections.general.center_mode":"Center Mode","settings.sections.experiments":"Experiments","settings.sections.uis":"UI Sounds","settings.sections.uis.soundpacks":"Soundpacks","settings.sections.uis.soundpacks.current":"Current Soundpack","settings.sections.bug":"Bug Report","settings.sections.bug.request_generate":'Click "Generate Report"',"settings.sections.bug.generate":"Generate Report","settings.sections.bug.report_reader":"Report Reader","settings.sections.bug.report_reader.read":"Read Report","settings.footer.by":"is a project by"};function s(){}function o(e,t="{{key}} not found in locale."){void 0===i[e]&&(console.warn(`Translation key ${e} not found in locale.`),0===Object.keys(i).length&&(console.warn("No translations loaded."),async function(){}()));const n=t.replace("{{key}}",e);return i[e]||n}},669:(e,t,n)=>{"use strict";function a(e){let t=e.length;for(;--t>=0;)e[t]=0}n.d(t,{m:()=>Xn});const i=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),r=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new Array(576);a(l);const d=new Array(60);a(d);const c=new Array(512);a(c);const u=new Array(256);a(u);const h=new Array(29);a(h);const p=new Array(30);function m(e,t,n,a,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=i,this.has_stree=e&&e.length}let f,g,_;function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}a(p);const y=e=>e<256?c[e]:c[256+(e>>>7)],b=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},w=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,b(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},k=(e,t,n)=>{w(e,n[2*t],n[2*t+1])},S=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},x=(e,t,n)=>{const a=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+n[i-1]<<1,a[i]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=S(a[t]++,t))}},C=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},L=e=>{e.bi_valid>8?b(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},E=(e,t,n,a)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&a[t]<=a[n]},U=(e,t,n)=>{const a=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&E(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!E(t,a,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=a},z=(e,t,n)=>{let a,o,r,l,d=0;if(0!==e.sym_next)do{a=255&e.pending_buf[e.sym_buf+d++],a+=(255&e.pending_buf[e.sym_buf+d++])<<8,o=e.pending_buf[e.sym_buf+d++],0===a?k(e,o,t):(r=u[o],k(e,r+256+1,t),l=i[r],0!==l&&(o-=h[r],w(e,o,l)),a--,r=y(a),k(e,r,n),l=s[r],0!==l&&(a-=p[r],w(e,a,l)))}while(d<e.sym_next);k(e,256,t)},T=(e,t)=>{const n=t.dyn_tree,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,r,l,d=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=d=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=a[2*l+1]);for(t.max_code=d,o=e.heap_len>>1;o>=1;o--)U(e,n,o);l=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],U(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=r,n[2*l]=n[2*o]+n[2*r],e.depth[l]=(e.depth[o]>=e.depth[r]?e.depth[o]:e.depth[r])+1,n[2*o+1]=n[2*r+1]=l,e.heap[1]=l++,U(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,a=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,r=t.stat_desc.extra_base,l=t.stat_desc.max_length;let d,c,u,h,p,m,f=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)c=e.heap[d],h=n[2*n[2*c+1]+1]+1,h>l&&(h=l,f++),n[2*c+1]=h,c>a||(e.bl_count[h]++,p=0,c>=r&&(p=o[c-r]),m=n[2*c],e.opt_len+=m*(h+p),s&&(e.static_len+=m*(i[2*c+1]+p)));if(0!==f){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,f-=2}while(f>0);for(h=l;0!==h;h--)for(c=e.bl_count[h];0!==c;)u=e.heap[--d],u>a||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),c--)}})(e,t),x(n,d,e.bl_count)},I=(e,t,n)=>{let a,i,s=-1,o=t[1],r=0,l=7,d=4;for(0===o&&(l=138,d=3),t[2*(n+1)+1]=65535,a=0;a<=n;a++)i=o,o=t[2*(a+1)+1],++r<l&&i===o||(r<d?e.bl_tree[2*i]+=r:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):r<=10?e.bl_tree[34]++:e.bl_tree[36]++,r=0,s=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4))},A=(e,t,n)=>{let a,i,s=-1,o=t[1],r=0,l=7,d=4;for(0===o&&(l=138,d=3),a=0;a<=n;a++)if(i=o,o=t[2*(a+1)+1],!(++r<l&&i===o)){if(r<d)do{k(e,i,e.bl_tree)}while(0!=--r);else 0!==i?(i!==s&&(k(e,i,e.bl_tree),r--),k(e,16,e.bl_tree),w(e,r-3,2)):r<=10?(k(e,17,e.bl_tree),w(e,r-3,3)):(k(e,18,e.bl_tree),w(e,r-11,7));r=0,s=i,0===o?(l=138,d=3):i===o?(l=6,d=3):(l=7,d=4)}};let $=!1;const D=(e,t,n,a)=>{w(e,0+(a?1:0),3),L(e),b(e,n),b(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var P={_tr_init:e=>{$||((()=>{let e,t,n,a,r;const v=new Array(16);for(n=0,a=0;a<28;a++)for(h[a]=n,e=0;e<1<<i[a];e++)u[n++]=a;for(u[n-1]=a,r=0,a=0;a<16;a++)for(p[a]=r,e=0;e<1<<s[a];e++)c[r++]=a;for(r>>=7;a<30;a++)for(p[a]=r<<7,e=0;e<1<<s[a]-7;e++)c[256+r++]=a;for(t=0;t<=15;t++)v[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,v[8]++;for(;e<=255;)l[2*e+1]=9,e++,v[9]++;for(;e<=279;)l[2*e+1]=7,e++,v[7]++;for(;e<=287;)l[2*e+1]=8,e++,v[8]++;for(x(l,287,v),e=0;e<30;e++)d[2*e+1]=5,d[2*e]=S(e,5);f=new m(l,i,257,286,15),g=new m(d,s,0,30,15),_=new m(new Array(0),o,0,19,7)})(),$=!0),e.l_desc=new v(e.dyn_ltree,f),e.d_desc=new v(e.dyn_dtree,g),e.bl_desc=new v(e.bl_tree,_),e.bi_buf=0,e.bi_valid=0,C(e)},_tr_stored_block:D,_tr_flush_block:(e,t,n,a)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),T(e,e.l_desc),T(e,e.d_desc),o=(e=>{let t;for(I(e,e.dyn_ltree,e.l_desc.max_code),I(e,e.dyn_dtree,e.d_desc.max_code),T(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*r[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?D(e,t,n,a):4===e.strategy||s===i?(w(e,2+(a?1:0),3),z(e,l,d)):(w(e,4+(a?1:0),3),((e,t,n,a)=>{let i;for(w(e,t-257,5),w(e,n-1,5),w(e,a-4,4),i=0;i<a;i++)w(e,e.bl_tree[2*r[i]+1],3);A(e,e.dyn_ltree,t-1),A(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),z(e,e.dyn_ltree,e.dyn_dtree)),C(e),a&&L(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(u[n]+256+1)]++,e.dyn_dtree[2*y(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{w(e,2,3),k(e,256,l),(e=>{16===e.bi_valid?(b(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},R=(e,t,n,a)=>{let i=65535&e,s=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[a++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const O=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var N=(e,t,n,a)=>{const i=O,s=a+n;e^=-1;for(let n=a;n<s;n++)e=e>>>8^i[255&(e^t[n])];return~e},q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},M={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:F,_tr_stored_block:B,_tr_flush_block:H,_tr_tally:j,_tr_align:Z}=P,{Z_NO_FLUSH:J,Z_PARTIAL_FLUSH:V,Z_FULL_FLUSH:W,Z_FINISH:G,Z_BLOCK:Y,Z_OK:K,Z_STREAM_END:X,Z_STREAM_ERROR:Q,Z_DATA_ERROR:ee,Z_BUF_ERROR:te,Z_DEFAULT_COMPRESSION:ne,Z_FILTERED:ae,Z_HUFFMAN_ONLY:ie,Z_RLE:se,Z_FIXED:oe,Z_DEFAULT_STRATEGY:re,Z_UNKNOWN:le,Z_DEFLATED:de}=M,ce=258,ue=262,he=42,pe=113,me=666,fe=(e,t)=>(e.msg=q[t],t),ge=e=>2*e-(e>4?9:0),_e=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ve=e=>{let t,n,a,i=e.w_size;t=e.hash_size,a=t;do{n=e.head[--a],e.head[a]=n>=i?n-i:0}while(--t);t=i,a=t;do{n=e.prev[--a],e.prev[a]=n>=i?n-i:0}while(--t)};let ye=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const be=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},we=(e,t)=>{H(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,be(e.strm)},ke=(e,t)=>{e.pending_buf[e.pending++]=t},Se=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},xe=(e,t,n,a)=>{let i=e.avail_in;return i>a&&(i=a),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=R(e.adler,t,i,n):2===e.state.wrap&&(e.adler=N(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Ce=(e,t)=>{let n,a,i=e.max_chain_length,s=e.strstart,o=e.prev_length,r=e.nice_match;const l=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,d=e.window,c=e.w_mask,u=e.prev,h=e.strstart+ce;let p=d[s+o-1],m=d[s+o];e.prev_length>=e.good_match&&(i>>=2),r>e.lookahead&&(r=e.lookahead);do{if(n=t,d[n+o]===m&&d[n+o-1]===p&&d[n]===d[s]&&d[++n]===d[s+1]){s+=2,n++;do{}while(d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&d[++s]===d[++n]&&s<h);if(a=ce-(h-s),s=h-ce,a>o){if(e.match_start=t,o=a,a>=r)break;p=d[s+o-1],m=d[s+o]}}}while((t=u[t&c])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead},Le=e=>{const t=e.w_size;let n,a,i;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ue)&&(e.window.set(e.window.subarray(t,t+t-a),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),ve(e),a+=t),0===e.strm.avail_in)break;if(n=xe(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=ye(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=ye(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ue&&0!==e.strm.avail_in)},Ee=(e,t)=>{let n,a,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,r=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&t!==G||t===J||n!==a+e.strm.avail_in))break;o=t===G&&n===a+e.strm.avail_in?1:0,B(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,be(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(xe(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return r-=e.strm.avail_in,r&&(r>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=r&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-r,e.strm.next_in),e.strstart),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==J&&t!==G&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(xe(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=s||(a||t===G)&&t!==J&&0===e.strm.avail_in&&a<=i)&&(n=a>i?i:a,o=t===G&&0===e.strm.avail_in&&n===a?1:0,B(e,e.block_start,n,o),e.block_start+=n,be(e.strm)),o?3:1)},Ue=(e,t)=>{let n,a;for(;;){if(e.lookahead<ue){if(Le(e),e.lookahead<ue&&t===J)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=Ce(e,n)),e.match_length>=3)if(a=j(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ye(e,e.ins_h,e.window[e.strstart+1]);else a=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(we(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===G?(we(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(we(e,!1),0===e.strm.avail_out)?1:2},ze=(e,t)=>{let n,a,i;for(;;){if(e.lookahead<ue){if(Le(e),e.lookahead<ue&&t===J)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=Ce(e,n),e.match_length<=5&&(e.strategy===ae||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,a=j(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(we(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(a=j(e,0,e.window[e.strstart-1]),a&&we(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=j(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===G?(we(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(we(e,!1),0===e.strm.avail_out)?1:2};function Te(e,t,n,a,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=i}const Ie=[new Te(0,0,0,0,Ee),new Te(4,4,8,4,Ue),new Te(4,5,16,8,Ue),new Te(4,6,32,32,Ue),new Te(4,4,16,16,ze),new Te(8,16,32,32,ze),new Te(8,16,128,128,ze),new Te(8,32,128,256,ze),new Te(32,128,258,1024,ze),new Te(32,258,258,4096,ze)];function Ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=de,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_e(this.dyn_ltree),_e(this.dyn_dtree),_e(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_e(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_e(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const $e=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==he&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==pe&&t.status!==me?1:0},De=e=>{if($e(e))return fe(e,Q);e.total_in=e.total_out=0,e.data_type=le;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?he:pe,e.adler=2===t.wrap?0:1,t.last_flush=-2,F(t),K},Pe=e=>{const t=De(e);var n;return t===K&&((n=e.state).window_size=2*n.w_size,_e(n.head),n.max_lazy_match=Ie[n.level].max_lazy,n.good_match=Ie[n.level].good_length,n.nice_match=Ie[n.level].nice_length,n.max_chain_length=Ie[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Re=(e,t,n,a,i,s)=>{if(!e)return Q;let o=1;if(t===ne&&(t=6),a<0?(o=0,a=-a):a>15&&(o=2,a-=16),i<1||i>9||n!==de||a<8||a>15||t<0||t>9||s<0||s>oe||8===a&&1!==o)return fe(e,Q);8===a&&(a=9);const r=new Ae;return e.state=r,r.strm=e,r.status=he,r.wrap=o,r.gzhead=null,r.w_bits=a,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=i+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+3-1)/3),r.window=new Uint8Array(2*r.w_size),r.head=new Uint16Array(r.hash_size),r.prev=new Uint16Array(r.w_size),r.lit_bufsize=1<<i+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new Uint8Array(r.pending_buf_size),r.sym_buf=r.lit_bufsize,r.sym_end=3*(r.lit_bufsize-1),r.level=t,r.strategy=s,r.method=n,Pe(e)};var Oe=Re,Ne=(e,t)=>$e(e)||2!==e.state.wrap?Q:(e.state.gzhead=t,K),qe=(e,t)=>{if($e(e)||t>Y||t<0)return e?fe(e,Q):Q;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===me&&t!==G)return fe(e,0===e.avail_out?te:Q);const a=n.last_flush;if(n.last_flush=t,0!==n.pending){if(be(e),0===e.avail_out)return n.last_flush=-1,K}else if(0===e.avail_in&&ge(t)<=ge(a)&&t!==G)return fe(e,te);if(n.status===me&&0!==e.avail_in)return fe(e,te);if(n.status===he&&0===n.wrap&&(n.status=pe),n.status===he){let t=de+(n.w_bits-8<<4)<<8,a=-1;if(a=n.strategy>=ie||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=a<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Se(n,t),0!==n.strstart&&(Se(n,e.adler>>>16),Se(n,65535&e.adler)),e.adler=1,n.status=pe,be(e),0!==n.pending)return n.last_flush=-1,K}if(57===n.status)if(e.adler=0,ke(n,31),ke(n,139),ke(n,8),n.gzhead)ke(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ke(n,255&n.gzhead.time),ke(n,n.gzhead.time>>8&255),ke(n,n.gzhead.time>>16&255),ke(n,n.gzhead.time>>24&255),ke(n,9===n.level?2:n.strategy>=ie||n.level<2?4:0),ke(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ke(n,255&n.gzhead.extra.length),ke(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=N(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ke(n,0),ke(n,0),ke(n,0),ke(n,0),ke(n,0),ke(n,9===n.level?2:n.strategy>=ie||n.level<2?4:0),ke(n,3),n.status=pe,be(e),0!==n.pending)return n.last_flush=-1,K;if(69===n.status){if(n.gzhead.extra){let t=n.pending,a=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=N(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,be(e),0!==n.pending)return n.last_flush=-1,K;t=0,a-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>t&&(e.adler=N(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=N(e.adler,n.pending_buf,n.pending-a,a)),be(e),0!==n.pending)return n.last_flush=-1,K;a=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ke(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=N(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=N(e.adler,n.pending_buf,n.pending-a,a)),be(e),0!==n.pending)return n.last_flush=-1,K;a=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ke(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=N(e.adler,n.pending_buf,n.pending-a,a))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(be(e),0!==n.pending))return n.last_flush=-1,K;ke(n,255&e.adler),ke(n,e.adler>>8&255),e.adler=0}if(n.status=pe,be(e),0!==n.pending)return n.last_flush=-1,K}if(0!==e.avail_in||0!==n.lookahead||t!==J&&n.status!==me){let a=0===n.level?Ee(n,t):n.strategy===ie?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Le(e),0===e.lookahead)){if(t===J)return 1;break}if(e.match_length=0,n=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(we(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===G?(we(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(we(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===se?((e,t)=>{let n,a,i,s;const o=e.window;for(;;){if(e.lookahead<=ce){if(Le(e),e.lookahead<=ce&&t===J)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,a=o[i],a===o[++i]&&a===o[++i]&&a===o[++i])){s=e.strstart+ce;do{}while(a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&a===o[++i]&&i<s);e.match_length=ce-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=j(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(we(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===G?(we(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(we(e,!1),0===e.strm.avail_out)?1:2})(n,t):Ie[n.level].func(n,t);if(3!==a&&4!==a||(n.status=me),1===a||3===a)return 0===e.avail_out&&(n.last_flush=-1),K;if(2===a&&(t===V?Z(n):t!==Y&&(B(n,0,0,!1),t===W&&(_e(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),be(e),0===e.avail_out))return n.last_flush=-1,K}return t!==G?K:n.wrap<=0?X:(2===n.wrap?(ke(n,255&e.adler),ke(n,e.adler>>8&255),ke(n,e.adler>>16&255),ke(n,e.adler>>24&255),ke(n,255&e.total_in),ke(n,e.total_in>>8&255),ke(n,e.total_in>>16&255),ke(n,e.total_in>>24&255)):(Se(n,e.adler>>>16),Se(n,65535&e.adler)),be(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?K:X)},Me=e=>{if($e(e))return Q;const t=e.state.status;return e.state=null,t===pe?fe(e,ee):K},Fe=(e,t)=>{let n=t.length;if($e(e))return Q;const a=e.state,i=a.wrap;if(2===i||1===i&&a.status!==he||a.lookahead)return Q;if(1===i&&(e.adler=R(e.adler,t,n,0)),a.wrap=0,n>=a.w_size){0===i&&(_e(a.head),a.strstart=0,a.block_start=0,a.insert=0);let e=new Uint8Array(a.w_size);e.set(t.subarray(n-a.w_size,n),0),t=e,n=a.w_size}const s=e.avail_in,o=e.next_in,r=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Le(a);a.lookahead>=3;){let e=a.strstart,t=a.lookahead-2;do{a.ins_h=ye(a,a.ins_h,a.window[e+3-1]),a.prev[e&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=e,e++}while(--t);a.strstart=e,a.lookahead=2,Le(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=o,e.input=r,e.avail_in=s,a.wrap=i,K};const Be=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var He=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Be(n,t)&&(e[t]=n[t])}}return e},je=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,a=0,i=e.length;t<i;t++){let i=e[t];n.set(i,a),a+=i.length}return n};let Ze=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ze=!1}const Je=new Uint8Array(256);for(let e=0;e<256;e++)Je[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Je[254]=Je[254]=1;var Ve=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,a,i,s,o=e.length,r=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(a=e.charCodeAt(i+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),i++)),r+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(r),s=0,i=0;s<r;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(a=e.charCodeAt(i+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},We=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let a,i;const s=new Array(2*n);for(i=0,a=0;a<n;){let t=e[a++];if(t<128){s[i++]=t;continue}let o=Je[t];if(o>4)s[i++]=65533,a+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&a<n;)t=t<<6|63&e[a++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ze)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n})(s,i)},Ge=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Je[e[n]]>t?n:t},Ye=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ke=Object.prototype.toString,{Z_NO_FLUSH:Xe,Z_SYNC_FLUSH:Qe,Z_FULL_FLUSH:et,Z_FINISH:tt,Z_OK:nt,Z_STREAM_END:at,Z_DEFAULT_COMPRESSION:it,Z_DEFAULT_STRATEGY:st,Z_DEFLATED:ot}=M;function rt(e){this.options=He({level:it,method:ot,chunkSize:16384,windowBits:15,memLevel:8,strategy:st},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ye,this.strm.avail_out=0;let n=Oe(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==nt)throw new Error(q[n]);if(t.header&&Ne(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ve(t.dictionary):"[object ArrayBuffer]"===Ke.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Fe(this.strm,e),n!==nt)throw new Error(q[n]);this._dict_set=!0}}function lt(e,t){const n=new rt(t);if(n.push(e,!0),n.err)throw n.msg||q[n.err];return n.result}rt.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?tt:Xe,"string"==typeof e?n.input=Ve(e):"[object ArrayBuffer]"===Ke.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(s===Qe||s===et)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=qe(n,s),i===at)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Me(this.strm),this.onEnd(i),this.ended=!0,i===nt;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},rt.prototype.onData=function(e){this.chunks.push(e)},rt.prototype.onEnd=function(e){e===nt&&(this.result=je(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dt={Deflate:rt,deflate:lt,deflateRaw:function(e,t){return(t=t||{}).raw=!0,lt(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,lt(e,t)},constants:M};const ct=16209;var ut=function(e,t){let n,a,i,s,o,r,l,d,c,u,h,p,m,f,g,_,v,y,b,w,k,S,x,C;const L=e.state;n=e.next_in,x=e.input,a=n+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),r=L.dmax,l=L.wsize,d=L.whave,c=L.wnext,u=L.window,h=L.hold,p=L.bits,m=L.lencode,f=L.distcode,g=(1<<L.lenbits)-1,_=(1<<L.distbits)-1;e:do{p<15&&(h+=x[n++]<<p,p+=8,h+=x[n++]<<p,p+=8),v=m[h&g];t:for(;;){if(y=v>>>24,h>>>=y,p-=y,y=v>>>16&255,0===y)C[i++]=65535&v;else{if(!(16&y)){if(64&y){if(32&y){L.mode=16191;break e}e.msg="invalid literal/length code",L.mode=ct;break e}v=m[(65535&v)+(h&(1<<y)-1)];continue t}for(b=65535&v,y&=15,y&&(p<y&&(h+=x[n++]<<p,p+=8),b+=h&(1<<y)-1,h>>>=y,p-=y),p<15&&(h+=x[n++]<<p,p+=8,h+=x[n++]<<p,p+=8),v=f[h&_];;){if(y=v>>>24,h>>>=y,p-=y,y=v>>>16&255,16&y){if(w=65535&v,y&=15,p<y&&(h+=x[n++]<<p,p+=8,p<y&&(h+=x[n++]<<p,p+=8)),w+=h&(1<<y)-1,w>r){e.msg="invalid distance too far back",L.mode=ct;break e}if(h>>>=y,p-=y,y=i-s,w>y){if(y=w-y,y>d&&L.sane){e.msg="invalid distance too far back",L.mode=ct;break e}if(k=0,S=u,0===c){if(k+=l-y,y<b){b-=y;do{C[i++]=u[k++]}while(--y);k=i-w,S=C}}else if(c<y){if(k+=l+c-y,y-=c,y<b){b-=y;do{C[i++]=u[k++]}while(--y);if(k=0,c<b){y=c,b-=y;do{C[i++]=u[k++]}while(--y);k=i-w,S=C}}}else if(k+=c-y,y<b){b-=y;do{C[i++]=u[k++]}while(--y);k=i-w,S=C}for(;b>2;)C[i++]=S[k++],C[i++]=S[k++],C[i++]=S[k++],b-=3;b&&(C[i++]=S[k++],b>1&&(C[i++]=S[k++]))}else{k=i-w;do{C[i++]=C[k++],C[i++]=C[k++],C[i++]=C[k++],b-=3}while(b>2);b&&(C[i++]=C[k++],b>1&&(C[i++]=C[k++]))}break}if(64&y){e.msg="invalid distance code",L.mode=ct;break e}v=f[(65535&v)+(h&(1<<y)-1)]}}break}}while(n<a&&i<o);b=p>>3,n-=b,p-=b<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=i<o?o-i+257:257-(i-o),L.hold=h,L.bits=p};const ht=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),pt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ft=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var gt=(e,t,n,a,i,s,o,r)=>{const l=r.bits;let d,c,u,h,p,m,f=0,g=0,_=0,v=0,y=0,b=0,w=0,k=0,S=0,x=0,C=null;const L=new Uint16Array(16),E=new Uint16Array(16);let U,z,T,I=null;for(f=0;f<=15;f++)L[f]=0;for(g=0;g<a;g++)L[t[n+g]]++;for(y=l,v=15;v>=1&&0===L[v];v--);if(y>v&&(y=v),0===v)return i[s++]=20971520,i[s++]=20971520,r.bits=1,0;for(_=1;_<v&&0===L[_];_++);for(y<_&&(y=_),k=1,f=1;f<=15;f++)if(k<<=1,k-=L[f],k<0)return-1;if(k>0&&(0===e||1!==v))return-1;for(E[1]=0,f=1;f<15;f++)E[f+1]=E[f]+L[f];for(g=0;g<a;g++)0!==t[n+g]&&(o[E[t[n+g]]++]=g);if(0===e?(C=I=o,m=20):1===e?(C=ht,I=pt,m=257):(C=mt,I=ft,m=0),x=0,g=0,f=_,p=s,b=y,w=0,u=-1,S=1<<y,h=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){U=f-w,o[g]+1<m?(z=0,T=o[g]):o[g]>=m?(z=I[o[g]-m],T=C[o[g]-m]):(z=96,T=0),d=1<<f-w,c=1<<b,_=c;do{c-=d,i[p+(x>>w)+c]=U<<24|z<<16|T}while(0!==c);for(d=1<<f-1;x&d;)d>>=1;if(0!==d?(x&=d-1,x+=d):x=0,g++,0==--L[f]){if(f===v)break;f=t[n+o[g]]}if(f>y&&(x&h)!==u){for(0===w&&(w=y),p+=_,b=f-w,k=1<<b;b+w<v&&(k-=L[b+w],!(k<=0));)b++,k<<=1;if(S+=1<<b,1===e&&S>852||2===e&&S>592)return 1;u=x&h,i[u]=y<<24|b<<16|p-s}}return 0!==x&&(i[p+x]=f-w<<24|64<<16),r.bits=y,0};const{Z_FINISH:_t,Z_BLOCK:vt,Z_TREES:yt,Z_OK:bt,Z_STREAM_END:wt,Z_NEED_DICT:kt,Z_STREAM_ERROR:St,Z_DATA_ERROR:xt,Z_MEM_ERROR:Ct,Z_BUF_ERROR:Lt,Z_DEFLATED:Et}=M,Ut=16180,zt=16190,Tt=16191,It=16192,At=16194,$t=16199,Dt=16200,Pt=16206,Rt=16209,Ot=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Nt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ut||t.mode>16211?1:0},Mt=e=>{if(qt(e))return St;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Ut,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,bt},Ft=e=>{if(qt(e))return St;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Mt(e)},Bt=(e,t)=>{let n;if(qt(e))return St;const a=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?St:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,Ft(e))},Ht=(e,t)=>{if(!e)return St;const n=new Nt;e.state=n,n.strm=e,n.window=null,n.mode=Ut;const a=Bt(e,t);return a!==bt&&(e.state=null),a};let jt,Zt,Jt=!0;const Vt=e=>{if(Jt){jt=new Int32Array(512),Zt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(gt(1,e.lens,0,288,jt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;gt(2,e.lens,0,32,Zt,0,e.work,{bits:5}),Jt=!1}e.lencode=jt,e.lenbits=9,e.distcode=Zt,e.distbits=5},Wt=(e,t,n,a)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),a>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>a&&(i=a),s.window.set(t.subarray(n-a,n-a+i),s.wnext),(a-=i)?(s.window.set(t.subarray(n-a,n),0),s.wnext=a,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var Gt=Ft,Yt=Ht,Kt=(e,t)=>{let n,a,i,s,o,r,l,d,c,u,h,p,m,f,g,_,v,y,b,w,k,S,x=0;const C=new Uint8Array(4);let L,E;const U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qt(e)||!e.output||!e.input&&0!==e.avail_in)return St;n=e.state,n.mode===Tt&&(n.mode=It),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,a=e.input,r=e.avail_in,d=n.hold,c=n.bits,u=r,h=l,S=bt;e:for(;;)switch(n.mode){case Ut:if(0===n.wrap){n.mode=It;break}for(;c<16;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(2&n.wrap&&35615===d){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&d,C[1]=d>>>8&255,n.check=N(n.check,C,2,0),d=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=Rt;break}if((15&d)!==Et){e.msg="unknown compression method",n.mode=Rt;break}if(d>>>=4,c-=4,k=8+(15&d),0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=Rt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&d?16189:Tt,d=0,c=0;break;case 16181:for(;c<16;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(n.flags=d,(255&n.flags)!==Et){e.msg="unknown compression method",n.mode=Rt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Rt;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,n.check=N(n.check,C,2,0)),d=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}n.head&&(n.head.time=d),512&n.flags&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,C[2]=d>>>16&255,C[3]=d>>>24&255,n.check=N(n.check,C,4,0)),d=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,n.check=N(n.check,C,2,0)),d=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&4&n.wrap&&(C[0]=255&d,C[1]=d>>>8&255,n.check=N(n.check,C,2,0)),d=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>r&&(p=r),p&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(s,s+p),k)),512&n.flags&&4&n.wrap&&(n.check=N(n.check,a,p,s)),r-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===r)break e;p=0;do{k=a[s+p++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&p<r);if(512&n.flags&&4&n.wrap&&(n.check=N(n.check,a,p,s)),r-=p,s+=p,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===r)break e;p=0;do{k=a[s+p++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&p<r);if(512&n.flags&&4&n.wrap&&(n.check=N(n.check,a,p,s)),r-=p,s+=p,k)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(4&n.wrap&&d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Rt;break}d=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Tt;break;case 16189:for(;c<32;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}e.adler=n.check=Ot(d),d=0,c=0,n.mode=zt;case zt:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=r,n.hold=d,n.bits=c,kt;e.adler=n.check=1,n.mode=Tt;case Tt:if(t===vt||t===yt)break e;case It:if(n.last){d>>>=7&c,c-=7&c,n.mode=Pt;break}for(;c<3;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}switch(n.last=1&d,d>>>=1,c-=1,3&d){case 0:n.mode=16193;break;case 1:if(Vt(n),n.mode=$t,t===yt){d>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Rt}d>>>=2,c-=2;break;case 16193:for(d>>>=7&c,c-=7&c;c<32;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Rt;break}if(n.length=65535&d,d=0,c=0,n.mode=At,t===yt)break e;case At:n.mode=16195;case 16195:if(p=n.length,p){if(p>r&&(p=r),p>l&&(p=l),0===p)break e;i.set(a.subarray(s,s+p),o),r-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=Tt;break;case 16196:for(;c<14;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(n.nlen=257+(31&d),d>>>=5,c-=5,n.ndist=1+(31&d),d>>>=5,c-=5,n.ncode=4+(15&d),d>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Rt;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}n.lens[U[n.have++]]=7&d,d>>>=3,c-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},S=gt(0,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,S){e.msg="invalid code lengths set",n.mode=Rt;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[d&(1<<n.lenbits)-1],g=x>>>24,_=x>>>16&255,v=65535&x,!(g<=c);){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(v<16)d>>>=g,c-=g,n.lens[n.have++]=v;else{if(16===v){for(E=g+2;c<E;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(d>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=Rt;break}k=n.lens[n.have-1],p=3+(3&d),d>>>=2,c-=2}else if(17===v){for(E=g+3;c<E;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}d>>>=g,c-=g,k=0,p=3+(7&d),d>>>=3,c-=3}else{for(E=g+7;c<E;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}d>>>=g,c-=g,k=0,p=11+(127&d),d>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Rt;break}for(;p--;)n.lens[n.have++]=k}}if(n.mode===Rt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Rt;break}if(n.lenbits=9,L={bits:n.lenbits},S=gt(1,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,S){e.msg="invalid literal/lengths set",n.mode=Rt;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},S=gt(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,S){e.msg="invalid distances set",n.mode=Rt;break}if(n.mode=$t,t===yt)break e;case $t:n.mode=Dt;case Dt:if(r>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=r,n.hold=d,n.bits=c,ut(e,h),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,a=e.input,r=e.avail_in,d=n.hold,c=n.bits,n.mode===Tt&&(n.back=-1);break}for(n.back=0;x=n.lencode[d&(1<<n.lenbits)-1],g=x>>>24,_=x>>>16&255,v=65535&x,!(g<=c);){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(_&&!(240&_)){for(y=g,b=_,w=v;x=n.lencode[w+((d&(1<<y+b)-1)>>y)],g=x>>>24,_=x>>>16&255,v=65535&x,!(y+g<=c);){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}d>>>=y,c-=y,n.back+=y}if(d>>>=g,c-=g,n.back+=g,n.length=v,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=Tt;break}if(64&_){e.msg="invalid literal/length code",n.mode=Rt;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(E=n.extra;c<E;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;x=n.distcode[d&(1<<n.distbits)-1],g=x>>>24,_=x>>>16&255,v=65535&x,!(g<=c);){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(!(240&_)){for(y=g,b=_,w=v;x=n.distcode[w+((d&(1<<y+b)-1)>>y)],g=x>>>24,_=x>>>16&255,v=65535&x,!(y+g<=c);){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}d>>>=y,c-=y,n.back+=y}if(d>>>=g,c-=g,n.back+=g,64&_){e.msg="invalid distance code",n.mode=Rt;break}n.offset=v,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(E=n.extra;c<E;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Rt;break}n.mode=16204;case 16204:if(0===l)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Rt;break}p>n.wnext?(p-=n.wnext,m=n.wsize-p):m=n.wnext-p,p>n.length&&(p=n.length),f=n.window}else f=i,m=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[o++]=f[m++]}while(--p);0===n.length&&(n.mode=Dt);break;case 16205:if(0===l)break e;i[o++]=n.length,l--,n.mode=Dt;break;case Pt:if(n.wrap){for(;c<32;){if(0===r)break e;r--,d|=a[s++]<<c,c+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?N(n.check,i,h,o-h):R(n.check,i,h,o-h)),h=l,4&n.wrap&&(n.flags?d:Ot(d))!==n.check){e.msg="incorrect data check",n.mode=Rt;break}d=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===r)break e;r--,d+=a[s++]<<c,c+=8}if(4&n.wrap&&d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Rt;break}d=0,c=0}n.mode=16208;case 16208:S=wt;break e;case Rt:S=xt;break e;case 16210:return Ct;default:return St}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=r,n.hold=d,n.bits=c,(n.wsize||h!==e.avail_out&&n.mode<Rt&&(n.mode<Pt||t!==_t))&&Wt(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?N(n.check,i,h,e.next_out-h):R(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Tt?128:0)+(n.mode===$t||n.mode===At?256:0),(0===u&&0===h||t===_t)&&S===bt&&(S=Lt),S},Xt=e=>{if(qt(e))return St;let t=e.state;return t.window&&(t.window=null),e.state=null,bt},Qt=(e,t)=>{if(qt(e))return St;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,bt):St},en=(e,t)=>{const n=t.length;let a,i,s;return qt(e)?St:(a=e.state,0!==a.wrap&&a.mode!==zt?St:a.mode===zt&&(i=1,i=R(i,t,n,0),i!==a.check)?xt:(s=Wt(e,t,n,n),s?(a.mode=16210,Ct):(a.havedict=1,bt)))},tn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const nn=Object.prototype.toString,{Z_NO_FLUSH:an,Z_FINISH:sn,Z_OK:on,Z_STREAM_END:rn,Z_NEED_DICT:ln,Z_STREAM_ERROR:dn,Z_DATA_ERROR:cn,Z_MEM_ERROR:un}=M;function hn(e){this.options=He({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ye,this.strm.avail_out=0;let n=Yt(this.strm,t.windowBits);if(n!==on)throw new Error(q[n]);if(this.header=new tn,Qt(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ve(t.dictionary):"[object ArrayBuffer]"===nn.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=en(this.strm,t.dictionary),n!==on)))throw new Error(q[n])}function pn(e,t){const n=new hn(t);if(n.push(e),n.err)throw n.msg||q[n.err];return n.result}hn.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize,i=this.options.dictionary;let s,o,r;if(this.ended)return!1;for(o=t===~~t?t:!0===t?sn:an,"[object ArrayBuffer]"===nn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),s=Kt(n,o),s===ln&&i&&(s=en(n,i),s===on?s=Kt(n,o):s===cn&&(s=ln));n.avail_in>0&&s===rn&&n.state.wrap>0&&0!==e[n.next_in];)Gt(n),s=Kt(n,o);switch(s){case dn:case cn:case ln:case un:return this.onEnd(s),this.ended=!0,!1}if(r=n.avail_out,n.next_out&&(0===n.avail_out||s===rn))if("string"===this.options.to){let e=Ge(n.output,n.next_out),t=n.next_out-e,i=We(n.output,e);n.next_out=t,n.avail_out=a-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==on||0!==r){if(s===rn)return s=Xt(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},hn.prototype.onData=function(e){this.chunks.push(e)},hn.prototype.onEnd=function(e){e===on&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=je(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var mn={Inflate:hn,inflate:pn,inflateRaw:function(e,t){return(t=t||{}).raw=!0,pn(e,t)},ungzip:pn,constants:M};const{Deflate:fn,deflate:gn,deflateRaw:_n,gzip:vn}=dt,{Inflate:yn,inflate:bn,inflateRaw:wn,ungzip:kn}=mn;var Sn={Deflate:fn,deflate:gn,deflateRaw:_n,gzip:vn,Inflate:yn,inflate:bn,inflateRaw:wn,ungzip:kn,constants:M};const xn=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,Cn=e=>{if("string"!=typeof e)throw new TypeError("Invalid argument expected string");const t=e.match(xn);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},Ln=e=>"*"===e||"x"===e||"X"===e,En=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},Un=(e,t)=>{if(Ln(e)||Ln(t))return 0;const[n,a]=((e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t])(En(e),En(t));return n>a?1:n<a?-1:0},zn=(e,t)=>{for(let n=0;n<Math.max(e.length,t.length);n++){const a=Un(e[n]||"0",t[n]||"0");if(0!==a)return a}return 0},Tn={official:[{type:"v3",title:"freedeck.app",url:"https://releases.freedeck.app/index.json",channel:"main"}],unofficial:[],getLegacyRepository:async function(e){return new Promise(((t,n)=>{const a=[];fetch(e).catch((e=>{n(e)})).then((e=>e.text())).then((e=>{e.includes(",!")||n({err:!0,msg:"No plugin metadata found."});let i=e.split("\n");i.shift(),i=i.filter((e=>e.length>0));for(const e of i){const t=e.split(",!"),n={file:t[0],githubRepo:`https://github.com/${t[1]}`,name:t[2],author:t[3],version:t[4],description:t[5],id:t[6]};a.push(n)}t(a)}))}))},getV3Repository:async function(e){const t=[],n=await fetch(`${e.url}?time=${Date.now()}`).catch((e=>e)),a=await n.json();if(!a.channels[e.channel])return{err:!0,msg:`Channel ${e.channel} not found.`};const i=a.channels[e.channel];let s=i.catalog;if("repository_external"===i.type){const e=await fetch(i.catalog).catch((e=>e));s=await e.json()}for(const e in s){const n=s[e];n.id=e,t.push(n)}return{...i,plugins:t}}},In=Tn;var An=n(340);const $n=e=>{const t={};for(const n of e)t[n.name]=[n.friendly,n.volume];for(const e of document.querySelectorAll(".button")){if(!e.getAttribute("data-interaction"))continue;if("editor-btn"===e.id)continue;let n=e.getAttribute("data-interaction");n=JSON.parse(n),"slider"===n.renderType&&n.data.app&&t[n.data.app]&&(n.data.value=100*t[n.data.app][1],e.setAttribute("data-interaction",JSON.stringify(n)),e.querySelector(".slider-container").dataset.value=100*t[n.data.app][1])}};function Dn(){universal.nbws&&universal.nbws.send("get_apps","")}const Pn={cache:[],send:(e,...t)=>{universal.send(universal.events.nbws.sendRequest,[e,t])},on:(e,t)=>{universal.on(`NBWS_${e}`,(e=>{t(e)}))},once:(e,t)=>{universal.once(`NBWS_${e}`,(e=>{t(e)}))},setVolume:(e,t)=>{Pn.send("set_volume",e,`${t}`),Pn.once("volume_set",(e=>{Pn.cache=e,$n(Pn.cache)}))}};function Rn(){universal.nbws=Pn,universal.nbws.on("error",(e=>{universal.sendToast("Native WebSocket",e)})),universal.nbws.on("apps",(e=>{universal.nbws.cache=e,$n(e)})),0!==Object.values(universal.nbws.cache).length&&$n(universal.nbws.cache),Dn(),Dn(),universal.listenFor("page_change",(()=>{0!==Object.values(universal.nbws.cache).length&&$n(universal.nbws.cache),Dn()})),setInterval((()=>{0!==Object.values(universal.nbws.cache).length&&$n(universal.nbws.cache),Dn()}),250)}function On(){universal.on(universal.events.companion.native_keypress,(e=>{var t,n;t=e.data.app,n=e.data.value,universal.nbws.setVolume(t,n)})),universal.on(universal.events.keypress,(e=>{if("fd.profile"===e.type&&(universal.page=0,universal.save("page",universal.page),universal.send(universal.events.companion.set_profile,e.data.profile)),"fd.macro_text"===e.type&&universal.nbws.send("macro_text",e.data.macro),"fd.macro"===e.type&&universal.nbws.send("macro",e.data.macro),"fd.fullscreen"===e.type){const e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}))}var Nn=n(44);const qn={_nowPlaying:[],_end:e=>{universal.audioClient._nowPlaying.splice(universal.audioClient._nowPlaying.indexOf(e.target),1),universal.updatePlaying()},_player:{normalVol:1,monitorVol:1,pitch:1},sinkManager:{types:{monitor:0,vbcable:1},sinks:[],devices:[],reloadDevices:async()=>{if(navigator.mediaDevices?.enumerateDevices){const e=[];navigator.mediaDevices.enumerateDevices().then((e=>e.filter((e=>"audiooutput"===e.kind)))).catch((e=>{console.error(e)}));for(const t of e)qn.sinkManager.devices.push(t),universal.CLU("Boot / Universal:AudioEngine","Created monitor potential devices")}else console.log("enumerateDevices() not supported.")},initialize:()=>{qn.sinkManager.reloadDevices(),universal.exists("audio/sinks")?(qn.sinkManager.sinks=universal.loadObj("audio/sinks"),universal.CLU("Boot / Universal:AudioEngine","Loaded audio/sinks")):(universal.CLU("Boot / Universal:AudioEngine","No audio/sinks found, creating new"),universal.saveObj("audio/sinks",qn.sinkManager.sinks))},addAndRemoveSink:async(e,t,n)=>{qn.sinkManager.sinks=qn.sinkManager.sinks.filter((e=>e.id!==n)),universal.CLU("Boot / Universal:AudioEngine","Removed sink"),qn.sinkManager.addSink(e,t)},removeSink:async e=>{qn.sinkManager.sinks=qn.sinkManager.sinks.filter((t=>t.id!==e)),universal.CLU("Boot / Universal:AudioEngine","Removed sink"),universal.saveObj("audio/sinks",qn.sinkManager.sinks)},addSink:async(e,t)=>{qn.sinkManager.sinks.push({type:e,id:t}),universal.CLU("Boot / Universal:AudioEngine","Added sink"),universal.saveObj("audio/sinks",qn.sinkManager.sinks)},getSinksForType:e=>qn.sinkManager.sinks.filter((t=>t.type===e)),hasSink:e=>qn.sinkManager.sinks.some((t=>t.id===e))},stopAll:async()=>{for(const e of universal.audioClient._nowPlaying)try{await e.pause()}catch(e){}},setPitch:e=>{universal.audioClient._player.pitch=e;for(const t of universal.audioClient._nowPlaying)t.playbackRate=e;universal.save("pitch",e)},setVolume:(e,t=qn.channels.cable)=>{t===qn.channels.monitor?universal.audioClient._player.monitorVol=e:universal.audioClient._player.normalVol=e;for(const n of universal.audioClient._nowPlaying)n.dataset.channel===t.toString()&&(n.volume=e);universal.save(`vol-${t}`,e)},channels:{cable:0,monitor:1,ui:2},sinks:[],initialize:()=>{universal.CLU("Boot / Universal:AudioEngine","Initializing audio engine"),qn.sinkManager.initialize(),universal.exists("vb.sink")&&(universal.audioClient.sinkManager.addSink(universal.audioClient.sinkManager.types.vbcable,universal.load("vb.sink")),universal.remove("vb.sink")),universal.exists("monitor.sink")&&(universal.audioClient.sinkManager.addSink(universal.audioClient.sinkManager.types.monitor,universal.load("monitor.sink")),universal.remove("monitor.sink"))},play:async({file:e,name:t,stopPrevious:n="stop_prev"===universal.load("playback-mode"),volume:a=universal.load("vol-0F")||1,pitch:i=universal.load("pitch")||1,channel:s})=>{const o=[];let r=1;const l=universal.audioClient.channels;if(s===l.monitor||s===l.ui){for(const e of qn.sinkManager.getSinksForType(qn.sinkManager.types.monitor))o.push(e.id);r=universal.audioClient._player.monitorVol,s===l.ui&&(r=a)}else{for(const e of qn.sinkManager.getSinksForType(qn.sinkManager.types.vbcable))o.push(e.id);r=universal.audioClient._player.normalVol}for(const a of o)await qn._play({file:e,name:t,stopPrevious:n,volume:r,pitch:i,channel:s,sink:a})},_play:async({file:e,name:t,stopPrevious:n="stop_prev"===universal.load("playback-mode"),volume:a=universal.load("vol-0")||1,pitch:i=universal.load("pitch")||1,channel:s,sink:o})=>{const r=universal.audioClient.channels,l=new Audio;if(l.src=e,l.load(),await l.setSinkId(o),l.playbackRate=i,l.volume=a,l.preservesPitch=!1,l.dataset.name=t,l.dataset.channel=s,l.dataset.monitoring=s===r.monitor,!0===n&&s!==r.ui)for(const e of universal.audioClient._nowPlaying)try{e.dataset.name===t&&e.dataset.channel===s.toString()&&await e.pause()}catch(e){}return l.play(),l.onpause=e=>{universal.sendEvent("audio-end",{audioInstance:l,name:t,channel:s}),universal.audioClient._end(e),l.remove()},universal.audioClient._nowPlaying.push(l),universal.sendEvent("now-playing",{audioInstance:l,name:t,channel:s}),universal.updatePlaying(),l},useSinkIfExists:async(e,t,n)=>{navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),universal.load(t)?await e.setSinkId(universal.load(t)):await e.setSinkId(n)}},Mn=qn,Fn=[],Bn={};let Hn=()=>{};function jn(e){return e.endsWith("#")?`/user-data/themes/${e.split("#")[0]}`:`/app/shared/theming/${e}`}async function Zn(e,t){const n={},a=t.split("\n");for(const e of a){if(!e.trim())continue;const[t,a]=e.trim().split(": ");n[t.split("--")[1]]=a.split('";')[0].split('"')[1]}return n.raw=t,Bn[e]=n,n}const Jn={listing:Fn,listingData:Bn,initialize:async function(){for(const e of universal._information.themes)Fn.push(e),universal.CLU("Boot / Theme Engine",`Added theme ${e}`)},fetchAndParse:async function(e){const t=await fetch(jn(e));if(200!==t.status)return console.error(`Failed to fetch theme ${e}`),universal.sendToast(`Failed to fetch theme ${e}`);const n=(await t.text()).match(/:theme-meta {([\s\S]*?)}/);return n?await Zn(e,n[1]):(universal.sendToast(`Failed to parse theme ${e}`),console.error(`Failed to parse theme ${e}`))},setTheme:function(e,t=!0){const n=Fn.includes(e)?e:"default";fetch(jn(n)).then((e=>e.text())).then((n=>{document.getElementById("theme")&&document.getElementById("theme").remove();const a=document.createElement("style");a.id="theme",a.innerText+=n,document.body.appendChild(a);const i=n.match(/:theme-meta {([\s\S]*?)}/),s=Zn(e,i[1]);Hn=()=>s,t&&universal.send(universal.events.companion.set_theme,e),universal.save("theme",e)})).catch((()=>{console.error("Failed to load theme."),universal.sendToast("Failed to load theme.")}))},currentTheme:Hn};function Vn(){Gn.enabled()&&(Gn.currentSoundpack=universal.load("soundpack")||"futuristic.soundpack",universal.CLU("Boot / UI Sounds","Auto-detecting current soundpack"),Gn.load(Gn.currentSoundpack).then((()=>{universal.CLU("Boot / UI Sounds","Loaded current soundpack."),Wn("page_enter")})))}async function Wn(e){Gn.enabled()&&universal.audioClient.play({file:`/common/sounds/${Gn.info.id}/${Gn.sounds[e]}`,name:e,channel:universal.audioClient.channels.ui,stopPrevious:!1,volume:.5})}const Gn={enabled:()=>universal.flags.isEnabled("uiSounds"),currentSoundpack:"futuristic.soundpack",info:{},sounds:{},playing:[],initialize:function(){universal.CLU("Boot / UI Sounds","Set enabled"),Gn.reload(),universal.CLU("Boot / UI Sounds","Reloaded sounds")},reload:Vn,load:async function(e){universal.CLU("Boot / UI Sounds",`Loading soundpack ${e}`);const t=await fetch(`/common/sounds/${e}/manifest.fdsp.json`).catch((e=>{console.error(e),universal.sendToast("Failed to load soundpack. Defaulting to futuristic."),Gn.currentSoundpack="futuristic.soundpack",Vn()}));universal.CLU("Boot / UI Sounds","Fetched manifest");const n=await t.json();return Gn.sounds=n.sounds,Gn.info=n.info,!0},playSound:Wn},Yn=Gn;var Kn=n(656);window.AppSM=function(){"Main"===Xn.name&&(document.querySelector(".settings-menu").style.display="flex",document.querySelector("#keys").style.display="none")},window.AppSMClose=function(){"Main"===Xn.name&&(document.querySelector(".settings-menu").style.animationName="pull-up",document.querySelector(".settings-menu").style.animationDuration="0.45s",document.querySelector(".settings-menu").style.animationFillMode="forwards",document.querySelector("#keys").style.animationName="pull-down",document.querySelector("#keys").style.animationDuration="0.5s",setTimeout((()=>{document.querySelector(".settings-menu").style.display="none",document.querySelector(".settings-menu").style.animationName="pull-down",document.querySelector("#keys").style.display="grid"}),250))},window._OldFetch=window.fetch,window.fetch=async(e,t)=>(e=`${Xn.relay}${e}`,window._OldFetch(e,t));const Xn={compareVersions:(e,t)=>{const n=Cn(e),a=Cn(t),i=n.pop(),s=a.pop(),o=zn(n,a);return 0!==o?o:i&&s?zn(i.split("."),s.split(".")):i||s?i?-1:1:0},relay:"",_socket:null,_ca:[],_Uploads_View:0,lastRetry:-1,connected:!1,reconnect:()=>{Xn.connected=!1,Xn.lastRetry=new Date,Xn._socket.connect(),Xn._ca.push(Xn.lastRetry)},wakeLock:{sentinel:null,request:async()=>{if("wakeLock"in navigator)try{Xn.wakeLock.sentinel=await navigator.wakeLock.request("screen"),Xn.CLU("Boot / WakeLock","Wake lock acquired.")}catch(e){console.error(`${e.name}, ${e.message}`),Xn.sendToast("Failed to acquire wake lock.")}}},lclCfg:()=>Xn._information.style||{compact:!1},_information:{},_init:!1,_authStatus:!1,_tyc:new Map,_serverRequiresAuth:!0,page:0,events:{},config:{},_loginAllowed:!1,keys:document.querySelector("#keys")?document.querySelector("#keys"):document.createElement("div"),notibar:document.querySelector("#snackbar")?document.querySelector("#snackbar"):document.createElement("div"),save:(e,t)=>localStorage.setItem(Xn.storage.prefix(e),t),load:e=>{if(localStorage.getItem(btoa(`fd.${e}`))){const t=localStorage.getItem(btoa(`fd.${e}`));localStorage.removeItem(btoa(`fd.${e}`)),Xn.CLU("Storage",`Migrated ${e} to new storage format.`),Xn.save(e,atob(t))}return localStorage.getItem(Xn.storage.prefix(e))||null},remove:e=>localStorage.removeItem(Xn.storage.prefix(e)),exists:e=>null!=localStorage.getItem(Xn.storage.prefix(e)),default:(e,t)=>(Xn.CLU("Default",`Setting ${e} to ${t}`),Xn.exists(e)?Xn.load(e):Xn.save(e,t)),loadObj:(e,t={})=>{try{return JSON.parse(Xn.load(e))||t}catch(n){return console.error("Error while loading object",e,n),t}},saveObj:(e,t)=>Xn.save(e,JSON.stringify(t)),flags:{_cache:{},reload:()=>{Xn.flags._cache=Xn.loadObj("flags")||{}},isEnabled:e=>"true"===Xn.flags._cache[e],set:(e,t)=>{Xn.flags._cache[e]=t,Xn.save("flags",JSON.stringify(Xn.flags._cache))},toggle:e=>{Xn.flags._cache[e]="true"===Xn.flags._cache[e]?"false":"true",Xn.save("flags",JSON.stringify(Xn.flags._cache))}},storage:{prefix:e=>`freedeck:${e}`,keys:()=>{const e=[];for(const t of Object.keys(localStorage))e.push(t);return e},reset:()=>{for(const e of Object.keys(localStorage))localStorage.removeItem(e),location.reload()}},waitForElement:(e,t)=>{const n=document.querySelector(e);if(n)t(n);else{const n=new MutationObserver((a=>{document.querySelector(e)&&(n.disconnect(),t(document.querySelector(e)))}));n.observe(document.body,{childList:!0,subtree:!0})}},showSpinner:(e=document.body)=>{const t=document.createElement("div");t.className="spinner",e.appendChild(t)},updatePlaying:()=>{if(document.querySelector(".now-playing")){const e=[];for(const t of Xn.audioClient._nowPlaying)e.push(t.getAttribute("data-name"));document.querySelector(".now-playing").innerText=e}},embedded_settings:{createSelect:async(e,t,n,a,i,s=()=>{})=>{const o=document.createElement("div");o.className="es-setting";const r=document.createElement("select");r.id=t;const l=document.createElement("label");l.innerText=e,l.htmlFor=t,o.appendChild(l),o.appendChild(r);const d=await n,c=await a;for(const e of d){const t=document.createElement("option");t.value=e,t.innerText=c[d.indexOf(e)],e===i&&(t.selected=!0),r.appendChild(t)}return-1===r.selectedIndex&&(r.selectedIndex=0),r.onchange=e=>{Xn.uiSounds.playSound("step_2"),s(e)},o}},audioClient:Mn,login:e=>{Xn.send(Xn.events.login.login_data,{tlid:Xn._information.tempLoginID}),Xn.send(Xn.events.login.login,{passwd:e})},theming:Jn,themes:[],imported_scripts:[],import:e=>{Xn.imported_scripts.push(e);const t=document.createElement("script");t.src=e,t.id=e.split("/").pop().split(".").shift(),document.body.appendChild(t)},ExportReportData:()=>{const e=Date.now();console.log("<h2>Exporting..</h2>"),console.log("<h3>Decoding Notification Log</h3>");const t=Xn.loadObj("logs/notif");console.log("<p>The notification log can get large, so this may take some time.</p>"),console.log(`<p>Your log is ${t.length} items long.</p>`),console.log("<h3>Decoded Notification Log.</h3>"),console.log("<p>Now, we're putting it all together.</p>");const n={};Object.assign(n,Xn),n._socket=`C=${Xn._socket.connected},U=${Xn._socket.io.uri}`,n.keys="DOM element";const a={erdStart:e,time:Date.now(),page:window.location.pathname,state:n,ls:{keys:Xn.storage.keys(),ls:localStorage},client_nlog:t,client_cfg:Xn.lclCfg(),errLog:Xn.ErrorLog,client_bootlog:Xn.CLUL},i=Date.now();return a.erdEnd=i,a.exportTimeElapsed=i-e,JSON.stringify(a)},CL:!0,CLUL:[["Page loaded",Date.now()]],showBootLog:An.UI.showBootLog,CLU:(e,...t)=>{Xn.CL&&console.log(`${e}:`,...t);const n=document.createElement("code");n.innerText=`${e}: ${t}\n`,Xn.CLUL.push([n.innerText,Date.now()]),document.querySelector("#boot-log").appendChild(n)},doInitialize:(e,t,...n)=>{try{Xn.CLU(`Systems/${t.name}`,`Initializing ${t.name}...`),e(...n),Xn.CLU(`Systems/${t.name}`,`Initialized ${t.name}!`)}catch(e){Xn.CLU(`Systems/${t.name}`,`Error while initializing system: ${e}`)}},init:e=>new Promise(((t,n)=>{fetch("/connect/webpack").then((e=>e.json())).then((t=>{1!==t.compiled&&(window.location.href=`/new-connect.html?id=${e}`)})),An.UI.makeBootLog(),(0,Kn.lE)(),Xn.CLU("Boot","(PRE LOG CREATION) Init promise created"),Xn.CLU("Boot","Boot log created"),Xn.CLU("Boot","Attempting to run LS migrations");try{Xn.CLU("Boot","Pre-init"),Xn._initFn(e).then((async()=>{Xn.CLU("Boot",`Received full configuration (${Object.keys(Xn.config).length} objects translated from ${Object.keys(Xn._information).length})`),Xn.CLU("Boot","Running post-init tasks"),Xn.doInitialize(Xn.theming.initialize,{name:"Theme Engine"},Xn),Xn.doInitialize(An.UI.initialize,{name:"UI"},Xn),Xn.doInitialize(Xn.audioClient.initialize,{name:"Audio Engine"},Xn),Xn.doInitialize(Xn.uiSounds.initialize,{name:"UI Sounds"},Xn),Xn.CLU("Boot","Post-init tasks completed."),Xn.CLU("Boot","Attempting to run localization."),Xn.sendEvent("launch"),An.UI.closeBootLog().then((()=>{Xn.CLU("Boot","Boot log closed."),(0,Kn.lE)(),t(!0)}))}))}catch(e){console.error(`${e} | Universal: initialize failed.`),n(e)}})),repositoryManager:In,uiSounds:Yn,_cb:[],keySet:()=>{let e=!1;null!=Xn.lclCfg()&&(e=Xn.lclCfg().center),Xn.keys.innerHTML="";for(let t=0;t<Xn.config.iconCountPerPage;t++){const n=document.createElement("div");n.className=`button k-${t} unset k ${e?"tiles-center":""}`,Xn.keys.appendChild(n)}let t=[{name:"Stop All",onclick:e=>{Xn.send(Xn.events.keypress,{builtIn:!0,data:"stop-all"})}},{name:"Reload",onclick:e=>{window.location.reload()}},{name:"Settings",onclick:e=>{window.AppSM()},handlers:["onmousedown"],onmousedown:An.UI.quickActions}];"true"===Xn.load("nopreset")&&(t=[]);for(const n of t){const t=document.createElement("div"),a="button builtin k "+(e?"tiles-center":"");if(t.innerText=n.name,t.onclick=n.onclick,"Settings"===n.name&&(t.innerText="",t.id="fd-settings-button",t.style.backgroundImage="url(/common/icons/fd.png)",t.style.border="none",t.style.backgroundColor="transparent",t.style.boxShadow="none"),n.handlers)for(const e of n.handlers)t[e]=n[e];t.className=a,Xn.keys.appendChild(t)}},connHelpWizard:()=>new Promise(((e,t)=>{Xn.listenFor("finish_conn",e),Xn.vopen("prompts")})),Pages:{},reloadProfile:()=>{Xn.app_sounds=Xn.config.profiles[Xn.config.profile];for(let e=0;e<Xn.app_sounds.length/Xn.config.iconCountPerPage;e++)Xn.Pages[e]=!0},listenFor:(e,t)=>{Xn._cb.push([e,t])},listenForOnce:(e,t)=>{Xn._cb.push([e,(...n)=>{t(...n),Xn._cb=Xn._cb.filter((t=>t[0]!==e))}])},sendEvent:(e,...t)=>{for(const n of Xn._cb)n[0]===e&&n[1](...t)},decompressGzipBlob(e,t){t(null,Sn.inflate(new Uint8Array(e),{to:"string"}))},asyncDecompressGzipBlob:e=>new Promise(((t,n)=>{Xn.decompressGzipBlob(e,((e,a)=>{e?n(e):t(a)}))})),name:"",_initFn:e=>new Promise(((t,n)=>{try{Xn.CLU("InitFN","Starting init function"),window.universal=Xn,Xn.CLU("InitFN","Copied universal to window"),Xn._socket=io(),Xn.CLU("InitFN","Preflight: connection to socket"),Xn._socket.on("connect",(()=>{if(Xn.CLU("InitFN","We're connected to the server!"),Xn.connected=!0,Xn.name=e,-1!==Xn.lastRetry)return Xn.CLU("InitFN","This is a reconnection."),Xn.sendToast("Reconnected to server."),Xn._socket.disconnect(),void window.location.reload();Xn.CLU("InitFN","Starting dataHandler"),function(e,t){return e.CLU("Incoming Data Handler","Taking over for now."),new Promise(((n,a)=>{e.on(1,(n=>{e.CLU("Incoming Data Handler",`Connection failed. Retrying. Reason: ${n}`),e.send(0,t)})),e.CLU("Incoming Data Handler","Created promise, listening for Identify event."),e.ui=An.UI,e.on("I",(async a=>{e.CLU("Incoming Data Handler","Caught Identify event."),e.connected=!0,window.universal=e,e.CLU("Incoming Data Handler","Re-copied Universal to window.");const i=await e.asyncDecompressGzipBlob(a);e.CLU("Incoming Data Handler","Decompressed data.");const s=JSON.parse(i);e.CLU("Incoming Data Handler","Parsed data."),e._information=JSON.parse(i),e.CLU("Incoming Data Handler:Setup","Set raw server info"),e.events=s.events,e.CLU("Incoming Data Handler:Setup","Set events"),e.config=s.config,e.CLU("Incoming Data Handler:Setup","Set Config"),console.log(s),e.app_sounds=s.config.profiles[s.config.profile],e.CLU("Incoming Data Handler:Setup","Set Config Sounds"),e.plugins=s.plugins,e.CLU("Incoming Data Handler:Setup","Set plugins"),e._serverRequiresAuth=e.config.useAuthentication,e.CLU("Incoming Data Handler:Setup","Set serverRequiresAuth"),e._init=!0,e.CLU("Incoming Data Handler:Setup","_init: Completed."),e.CLU("Incoming Data Handler","Creating defaults."),e.default("logs/notif",JSON.stringify([])),e.default("playback-mode","play_over"),e.default("vol-0",1),e.default("vol-1",1),e.default("pitch",1),e.default("uiSounds",!0),e.default("flags",JSON.stringify({})),e.default("has_setup","false"),e.default("theme","default"),e.default("profile","Default"),e.default("repos.community",JSON.stringify([])),e.flags.reload(),e.load("welcomed")||(e.sendToast("Welcome to Freedeck."),e.CLU("Incoming Data Handler","Welcomed user."),e.save("welcomed","true")),e.CLU("Incoming Data Handler","Saved TempLoginID."),e.save("tempLoginID",s.tempLoginID),e.keys.id="keys",e.CLU("Incoming Data Handler","Forcefully setting keys ID."),document.querySelector("#keys")||(e.CLU("Incoming Data Handler","Appending/Creating keys to body."),document.body.appendChild(e.keys)),e.notibar.id="snackbar",e.CLU("Incoming Data Handler","Forcefully setting notibar ID."),document.querySelector("#snackbar")||(e.CLU("Incoming Data Handler","Appending/Creating notibar to body."),document.body.appendChild(e.notibar)),e.CLU("Incoming Data Handler","Setting up sidebar."),(0,Nn.default)(),e.send(e.events.information,{apiVersion:"2"}),e.CLU("Incoming Data Handler","Identified ourselves as Companion APIv2."),"Companion"===e.name&&(e.repositoryManager.unofficial=e.loadObj("repos.community",[])||[],e.CLU("Incoming Data Handler","Setup unofficial repositories.")),e.CLU("Incoming Data Handler","Setting up plugins for Tile Editor.");for(const t of Object.keys(e.plugins)){const n=e.plugins[t];for(const t of n.types)e.CLU("Incoming Data Handler",`Type: ${t.name} -> ${n.name} (aka. ${n.id})`),e._tyc.set(t,n)}if("Companion"===t&&(On(),An.UI.reloadPluginViews(),e.CLU("Incoming Data Handler","Native handler created."),e._information.nbws)){const e=document.createElement("iframe");e.src="/companion/open_native.html",e.style.display="none",document.body.appendChild(e)}Rn(),e.CLU("Incoming Data Handler","Generic native handler created. Resolving as we're finished here."),n(!0)})),e.CLU("Incoming Data Handler","Sent Identify packet"),e.send(0,t)}))}(Xn,e).then((()=>{Xn.CLU("InitFN","Starting eventsHandler"),function(e,t){return new Promise(((n,a)=>{e.CLU("Event Handler","Creating event handlers..."),e.on(e.events.login.unauthorized,(()=>e.sendToast("You are not authenticated!"))),e.on(e.events.login.session_validation_failure,(()=>e.sendToast("Login not allowed! Session could not be verified against server."))),e.on(e.events.companion.set_theme,(t=>{e.theming.setTheme(t,!1)})),e.on(e.events.companion.set_profile,(t=>{e.config.profile=t,An.UI.reloadProfile(),An.UI.reloadSounds(),e.sendEvent("profile",t)})),e.on(e.events.keypress,(n=>{if(!t.includes("Companion"))return;if("fd.stopall"===n.type)return void e.audioClient.stopAll();if(e.sendEvent("button",n),"fd.sound"!==n.type)return;e.reloadProfile();const a=e.app_sounds.filter((e=>e[Object.keys(e)[0]].uuid===n.uuid))[0];e.load("playback-mode")||e.save("playback-mode","play_over"),e.audioClient.play({file:`${n.data.path}/${n.data.file}`,name:Object.keys(a)[0],channel:e.audioClient.channels.cable}),e.audioClient.play({file:`${n.data.path}/${n.data.file}`,name:Object.keys(a)[0],channel:e.audioClient.channels.monitor})})),e.on(e.events.default.recompile,(()=>{window.location.href=`/new-connect.html?id=${t}`})),e.on(e.events.default.log,(e=>{console.log(`${e.sender}: ${e.data}`)})),e.on(e.events.default.notif,(t=>{t.incoming||("handoff-api"!==t.sender?(t.isCon||e.sendToast(`${t.data}`,t.sender),t.isCon&&e.sendEvent("notif",t)):function(t){if("Authorize"===t.data&&t.incoming&&"Companion"===e.name)showPick(`${t.incoming.appInformation.title} wants to connect to your Freedeck!`,[{value:"true",name:"Authorize"},{value:"false",name:"Deny"}],(({value:n})=>{e.send(e.events.rpc.reply,JSON.stringify({id:t.incoming.appInformation.id,nonce:t.incoming.nonce,value:n.value}))}),t.incoming.appInformation.authorizationMessage,!1);else if("handoff-api"===t.sender&&t.data.startsWith("hid.c ")){const t=notification.data.split("hid.c ")[1].split(" |")[0],n=JSON.parse(notification.data.split(`hid.c ${t} |`)[1]);"ui-sound"===t&&e.uiSounds.playSound(n.sound)}}(t))})),e._socket.on("disconnect",(()=>{e.connected=!1,e.sendToast("Disconnected from server.","Server"),e.lastRetry=new Date;const t=setInterval((()=>{e.sendToast("Attempting to reconnect..."),e.reconnect(),setTimeout((()=>{!0===e.connected&&clearInterval(t)}),1500)}),2e3)})),e.on(e.events.login.login_data_ack,(t=>{e._loginAllowed=t})),e.on(e.events.default.reload,(()=>window.location.reload())),e.on(e.events.default.config_changed,(t=>{document.documentElement.style.setProperty("--font-size",`${t["font-size"]}px`),"Companion"!==e.name&&(document.documentElement.style.setProperty("--tile-width",`${t.buttonSize}rem`),document.documentElement.style.setProperty("--tile-height",`${t.buttonSize}rem`));let n="repeat(5, 2fr)";t.tileCols&&(n=n.replace("5",t.tileCols)),e.save("nopreset",t.nopreset),document.documentElement.style.setProperty("--tile-columns",n),e.lclCfg=()=>t,e.lclCfg().iconCountPerPage=Number.parseInt(t.iconCountPerPage),e.sendEvent("local-config",t),An.UI.reloadSounds()})),e.on(e.events.default.reload_sounds,(t=>{e.config.profiles[e.config.profile]=t,An.UI.reloadSounds()})),e.on(e.events.default.login,(t=>{e.authStatus=t,!1===t&&(e.sendToast("Incorrect password!"),document.querySelector("#login-dialog")&&(document.querySelector("#login-dialog").style.display="flex")),e.sendEvent("auth",t)})),e.sendEvent("init"),e.CLU("Event Handler","Created event handlers, sending init event.");const i="Main"===e.name?"client":"companion";e.CLU("Event Handler","Loading hooks...");let s=0;for(const e of document.querySelectorAll(".fd-hook"))e.remove();for(const t of Object.keys(e.plugins)){const n=e.plugins[t];for(const t of n.hooks.filter((t=>t.type===("Main"===e.name?0:1)))){const n=document.createElement("script");n.classList.add("fd-hook"),n.classList.add(`fd-hook-${i}`),n.src=`/user-data/hooks/${t.name}`,e.CLU("Event Handler",`Loaded ${i} hook: ${t.name}`),s++,document.body.appendChild(n)}}e.CLU("Event Handler",`Loaded ${s} ${i} hooks from ${Object.keys(e.plugins).length} plugins.`),e.sendEvent("loadHooks"),e.CLU("Event Handler","Tell plugins that their hooks are loaded."),n(!0)}))}(Xn,e).then((()=>{t(!0)}))}))})),Xn.CLU("InitFN / WakeLock","Attempting to grab wake lock."),Xn.wakeLock.request(),Xn.CLU("InitFN","Boot completed.")}catch(e){console.error(e),n(e)}})),sendToast:(e,t="")=>{if(HTMLElement.prototype.setHTML||(HTMLElement.prototype.setHTML=function(e){this.innerHTML=Xn.cleanHTML(e)}),!document.querySelector("#snackbar")){const e=document.createElement("div");e.id="snackbar",document.body.appendChild(e)}const n=document.createElement("div");n.setHTML(`<h3>${t}</h3>${e}`),n.classList.add("toast"),n.classList.add("show"),n.onclick=()=>{n.className=n.className.replace("show",""),n.remove()},Xn.uiSounds.playSound("notification"),document.querySelector("#snackbar").appendChild(n),setTimeout((()=>{n.className=n.className.replace("show","hide"),setTimeout((()=>{n.remove()}),500)}),3e3);const a={timestamp:new Date,page:window.location.pathname,message:e};if(Xn.loadObj("logs/notif").length>0&&!Xn.flags.isEnabled("notification-log"))Xn.saveObj("logs/notif",[]);else if(Xn.loadObj("logs/notif").length>128&&Xn.saveObj("logs/notif",[]),Xn.flags.isEnabled("notification-log")){const e=Xn.loadObj("logs/notif");e.push(a),Xn.saveObj("logs/notif",e)}},send:(e,t)=>{Xn._socket.emit(e,t)},on:(e,t)=>{Xn._socket.on(e,t)},once:(e,t)=>{Xn._socket.once(e,t)},log:(e,t="Universal")=>{Xn.send(Xn.events.default.log,{sender:t,data:e}),console.log(`[${t}] ${e}`)},ErrorLog:[],createTooltipFor:(e,t)=>{const n=document.createElement("div");return n.className="tooltip",n.innerHTML=t,document.body.appendChild(n),e.onmouseleave=()=>{n.classList.remove("show")},e.onmouseenter=()=>{n.classList.add("show")},e.onmousemove=e=>{n.style.top=`${e.clientY}px`,n.style.left=`${e.clientX}px`},n},cleanHTML(e,t){function n(e,t){const n=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!n.includes("javascript:")&&!n.includes("data:"))||!!e.startsWith("on")||void 0}function a(e){const t=e.attributes;for(const{name:a,value:i}of t)n(a,i)&&e.removeAttribute(a)}const i=(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body");return function(e){const t=e.querySelectorAll("script");for(const e of t)e.remove()}(i),function e(t){const n=t.children;for(const t of n)a(t),e(t)}(i),t?i.childNodes:i.innerHTML}};window.universal=Xn,window.onerror=(e,t,n,a,i)=>{document.querySelector("#keys").style.display="none";let s=document.createElement("dialog");if(document.querySelector("#error-dialog"))s=document.querySelector("#error-dialog");else{s.id="error-dialog",s.classList.add("modal");const i=document.createElement("div");i.innerHTML=`\n    <h1>Freedeck</h1>\n    <p>\n      Freedeck has encountered an error. This does not crash the app, but may cause unexpected behavior.\n    </p>\n\t\t<small>Handler: universal</small>\n    <details open>\n      <summary>Error Details</summary>\n      <small>\n        ${e} in ${t} at line ${n}:${a}\n      </small>\n    </details>\n    <br>\n    <div class='flex-wrap-r'>\n    <a style='display:block;width:100%;font-size:1.5em;text-align:center;' href='javascript:window.ErrorIgnore();'>Ignore</a>\n    <a style='display:block;width:100%;font-size:1.5em;text-align:center;' href='javascript:window.location.reload();'>Reload</a>\n    </div>\n    <small>Ignoring the error may cause Freedeck to be unusable.</small>\n    `,s.appendChild(i),document.body.appendChild(s),s.showModal()}console.log(e,t,n,a,i)},window.ErrorIgnore=()=>{document.querySelector("#error-dialog").remove(),document.querySelector("#keys").style.display="grid",window.location.href.includes("companion")&&(document.querySelector(".sidebar").style.display="flex")},Xn.UI||(Xn.UI=An.UI),Xn.listenFor("animate_page",((e="automated",t="left")=>{if(!0!==Xn.lclCfg().animation)return;const n=document.getElementById("keys");"automated"===e&&(n.style.animation=`pull-${t} 0.5s`)}))},806:()=>{const e=window.universal;HTMLElement.prototype.setHTML||(HTMLElement.prototype.setHTML=function(e){this.innerHTML=e}),e.listenFor("init",(()=>{if(!1!==e._information.config.useAuthentication){if(!e._authStatus){const e=document.createElement("li");e.style.display="none",e.id="login",e.setHTML('<a href="#">Login</a>'),e.onclick=()=>{document.querySelector("#login-msg")&&document.querySelector("#login-msg").setHTML("Login to Freedeck")},e.click(),document.querySelector("#sidebar > ul").appendChild(e)}e.load("password")?(e.login(e.load("password")),document.querySelector("#login-dialog").style.display="none"):(document.querySelector("#login-dialog").style.display="flex",document.querySelector("#login-div").style.opacity="1"),e.on(e.events.login.login,(t=>{!0===t?(e.load("logintime")>Date.now()&&e.sendToast("Logged in!"),document.querySelector("#password")&&""!==document.querySelector("#password").value&&e.save("password",document.querySelector("#password").value),e.save("logintime",Date.now()),document.querySelector("#login-div").style.opacity="0",document.querySelector("#login-dialog").style.opacity="0",setTimeout((()=>{document.querySelector("#login-dialog").remove()}),250)):document.querySelector("#login-msg").setHTML("Login failed.")}))}else e._authStatus=!0}))}},r={};function l(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e](n,n.exports,l),n.exports}l.m=o,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(i,s,o)=>{var r;o&&((r=[]).d=-1);var l,d,c,u=new Set,h=i.exports,p=new Promise(((e,t)=>{c=t,d=e}));p[t]=h,p[e]=e=>(r&&e(r),u.forEach(e),p.catch((e=>{}))),i.exports=p,s((i=>{var s;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var s=[];s.d=0,i.then((e=>{o[t]=e,a(s)}),(e=>{o[n]=e,a(s)}));var o={};return o[e]=e=>e(s),o}}var r={};return r[e]=e=>{},r[t]=i,r})))(i);var o=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),d=new Promise((t=>{(s=()=>t(o)).r=0;var n=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)));l.map((t=>t[e](n)))}));return s.r?d:o()}),(e=>(e?c(p[n]=e):d(h),a(r)))),r&&r.d<0&&(r.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".js",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},s="freedeck:",l.l=(e,t,n,a)=>{if(i[e])i[e].push(t);else{var o,r;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==s+n){o=u;break}}o||(r=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.setAttribute("data-webpack",s+n),o.src=e),i[e]=[t];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var a=i[e];if(delete i[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),r&&document.head.appendChild(o)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={557:0};l.f.j=(t,n)=>{var a=l.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise(((n,i)=>a=e[t]=[n,i]));n.push(a[2]=i);var s=l.p+l.u(t),o=new Error;l.l(s,(n=>{if(l.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var a,i,[s,o,r]=n,d=0;if(s.some((t=>0!==e[t]))){for(a in o)l.o(o,a)&&(l.m[a]=o[a]);r&&r(l)}for(t&&t(n);d<s.length;d++)i=s[d],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkfreedeck=self.webpackChunkfreedeck||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),l(631)})();